"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _a;
"use strict";
const PARENT_KEY = Symbol();
const CHILDREN_KEYS = Symbol();
class KeyNode extends String {
    constructor(key, parentKey = null) {
        super(key);
        this[_a] = new Set();
        this[PARENT_KEY] = parentKey;
        if (parentKey !== null) {
            parentKey[CHILDREN_KEYS].add(this);
        }
    }
    //Accessors
    get isRootKey() {
        return this[PARENT_KEY] === null;
    }
    get isTerminalKey() {
        return this[CHILDREN_KEYS].size === 0;
    }
    get parent() {
        return this[PARENT_KEY];
    }
    get [(_a = CHILDREN_KEYS, Symbol.toStringTag)]() {
        return this.constructor.name;
    }
    get dotNotatedPath() {
        let path = [];
        for (const key of this.path()) {
            path.push(key.toString());
        }
        return path.join('.');
    }
    get numChildren() {
        return this[CHILDREN_KEYS].size;
    }
    get depth() {
        let depth = 0;
        let pKey = this[PARENT_KEY];
        while (pKey !== null) {
            depth++;
            pKey = pKey[PARENT_KEY];
        }
        return depth;
    }
    //Mehtods
    *path() {
        const path = [this];
        let pKey = this[PARENT_KEY];
        while (pKey !== null) {
            path.push(pKey);
            pKey = pKey[PARENT_KEY];
        }
        while (path.length > 0) {
            yield path.pop();
        }
    }
    children() {
        return this[CHILDREN_KEYS].values();
    }
    *siblings() {
        const parent = this[PARENT_KEY];
        if (parent === null) {
            return;
        }
        for (const sib of parent.children()) {
            if (sib !== this) {
                yield sib;
            }
        }
    }
}
exports.default = KeyNode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiS2V5Tm9kZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9LZXlOb2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxNQUFNLFVBQVUsR0FBaUIsTUFBTSxFQUFFLENBQUM7QUFDMUMsTUFBTSxhQUFhLEdBQWlCLE1BQU0sRUFBRSxDQUFDO0FBRTdDLGFBQTZCLFNBQVEsTUFBTTtJQUt6QyxZQUFZLEdBQVUsRUFBRSxZQUFvQixJQUFJO1FBRTlDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUpJLFFBQWUsR0FBRyxJQUFJLEdBQUcsRUFBVyxDQUFDO1FBTXBELElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxTQUFTLENBQUM7UUFFN0IsSUFBRyxTQUFTLEtBQUssSUFBSSxFQUFDO1lBRXBCLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7U0FFcEM7SUFFSCxDQUFDO0lBRUQsV0FBVztJQUNYLElBQUksU0FBUztRQUVYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLElBQUksQ0FBQztJQUVuQyxDQUFDO0lBQ0QsSUFBSSxhQUFhO1FBRWYsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQztJQUV4QyxDQUFDO0lBRUQsSUFBSSxNQUFNO1FBRVIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFMUIsQ0FBQztJQUVELElBQUksT0FsQ2MsYUFBYSxFQWtDMUIsTUFBTSxDQUFDLFdBQVcsRUFBQztRQUV0QixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO0lBRS9CLENBQUM7SUFFRCxJQUFJLGNBQWM7UUFFaEIsSUFBSSxJQUFJLEdBQVksRUFBRSxDQUFDO1FBRXZCLEtBQUksTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxFQUFDO1lBRTNCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FFM0I7UUFFRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFeEIsQ0FBQztJQUVELElBQUksV0FBVztRQUViLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUVsQyxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBRVAsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWQsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRTVCLE9BQU0sSUFBSSxLQUFLLElBQUksRUFBQztZQUVsQixLQUFLLEVBQUUsQ0FBQztZQUVSLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FFekI7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUVmLENBQUM7SUFFRCxTQUFTO0lBQ1QsQ0FBQyxJQUFJO1FBRUgsTUFBTSxJQUFJLEdBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU5QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFNUIsT0FBTSxJQUFJLEtBQUssSUFBSSxFQUFDO1lBRWxCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFaEIsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUV6QjtRQUVELE9BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7WUFFcEIsTUFBTSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7U0FFbEI7SUFFSCxDQUFDO0lBRUQsUUFBUTtRQUVOLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBRXRDLENBQUM7SUFFRCxDQUFDLFFBQVE7UUFFUCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFaEMsSUFBRyxNQUFNLEtBQUssSUFBSSxFQUFDO1lBRWpCLE9BQU87U0FFUjtRQUVELEtBQUksTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSxFQUFDO1lBRWpDLElBQUcsR0FBRyxLQUFLLElBQUksRUFBQztnQkFFZCxNQUFNLEdBQUcsQ0FBQzthQUVYO1NBRUY7SUFFSCxDQUFDO0NBRUY7QUFwSUQsMEJBb0lDIn0=