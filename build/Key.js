"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _a;
"use strict";
const PARENT_KEY = Symbol();
const CHILDREN_KEYS = Symbol();
class Key extends String {
    constructor(key, parentKey = null) {
        super(key);
        this[_a] = new Set();
        this[PARENT_KEY] = parentKey;
        if (parentKey !== null) {
            parentKey[CHILDREN_KEYS].add(this);
        }
    }
    //Accessors
    get isRootKey() {
        return this[PARENT_KEY] === null;
    }
    get parent() {
        return this[PARENT_KEY];
    }
    get [(_a = CHILDREN_KEYS, Symbol.toStringTag)]() {
        return this.constructor.name;
    }
    get dotNotatedPath() {
        let path = [];
        for (const key of this.path()) {
            path.push(key.toString());
        }
        return path.join('.');
    }
    get numChildren() {
        return this[CHILDREN_KEYS].size;
    }
    //Mehtods
    *path() {
        const path = [this];
        let pKey = this[PARENT_KEY];
        while (pKey !== null) {
            path.push(pKey);
            pKey = pKey[PARENT_KEY];
        }
        while (path.length > 0) {
            yield path.pop();
        }
    }
    children() {
        return this[CHILDREN_KEYS].values();
    }
    *siblings() {
        const parent = this[PARENT_KEY];
        if (parent === null) {
            return;
        }
        for (const sib of parent.children()) {
            if (sib !== this) {
                yield sib;
            }
        }
    }
}
exports.default = Key;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiS2V5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0tleS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsTUFBTSxVQUFVLEdBQWlCLE1BQU0sRUFBRSxDQUFDO0FBQzFDLE1BQU0sYUFBYSxHQUFpQixNQUFNLEVBQUUsQ0FBQztBQUU3QyxTQUF5QixTQUFRLE1BQU07SUFLckMsWUFBWSxHQUFVLEVBQUUsWUFBZ0IsSUFBSTtRQUUxQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFKSSxRQUFlLEdBQUcsSUFBSSxHQUFHLEVBQU8sQ0FBQztRQU1oRCxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsU0FBUyxDQUFDO1FBRTdCLElBQUcsU0FBUyxLQUFLLElBQUksRUFBQztZQUVwQixTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBRXBDO0lBRUgsQ0FBQztJQUVELFdBQVc7SUFDWCxJQUFJLFNBQVM7UUFFWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxJQUFJLENBQUM7SUFFbkMsQ0FBQztJQUVELElBQUksTUFBTTtRQUVSLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRTFCLENBQUM7SUFFRCxJQUFJLE9BN0JjLGFBQWEsRUE2QjFCLE1BQU0sQ0FBQyxXQUFXLEVBQUM7UUFFdEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztJQUUvQixDQUFDO0lBRUQsSUFBSSxjQUFjO1FBRWhCLElBQUksSUFBSSxHQUFZLEVBQUUsQ0FBQztRQUV2QixLQUFJLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBQztZQUUzQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBRTNCO1FBRUQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXhCLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFFYixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFFbEMsQ0FBQztJQUVELFNBQVM7SUFDVCxDQUFDLElBQUk7UUFFSCxNQUFNLElBQUksR0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTFCLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUU1QixPQUFNLElBQUksS0FBSyxJQUFJLEVBQUM7WUFFbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVoQixJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBRXpCO1FBRUQsT0FBTSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQztZQUVwQixNQUFNLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztTQUVsQjtJQUVILENBQUM7SUFFRCxRQUFRO1FBRU4sT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7SUFFdEMsQ0FBQztJQUVELENBQUMsUUFBUTtRQUVQLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUVoQyxJQUFHLE1BQU0sS0FBSyxJQUFJLEVBQUM7WUFFakIsT0FBTztTQUVSO1FBRUQsS0FBSSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxFQUFFLEVBQUM7WUFFakMsSUFBRyxHQUFHLEtBQUssSUFBSSxFQUFDO2dCQUVkLE1BQU0sR0FBRyxDQUFDO2FBRVg7U0FFRjtJQUVILENBQUM7Q0FFRjtBQTdHRCxzQkE2R0MifQ==